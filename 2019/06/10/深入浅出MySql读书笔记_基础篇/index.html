<!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"><link rel="stylesheet" href="/css/main.css?v=7.1.2"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2"><link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"7.1.2",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!0,fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><script></script><meta name="description" content="听说是本好书鸭"><meta name="keywords" content="编程,mysql,读书笔记,深入浅出mysql"><meta property="og:type" content="article"><meta property="og:title" content="深入浅出mysql读书笔记_基础篇"><meta property="og:url" content="http://yoursite.com/2019/06/10/深入浅出MySql读书笔记_基础篇/index.html"><meta property="og:site_name" content="但行好事,莫问前程"><meta property="og:description" content="听说是本好书鸭"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe16e056f9274770.png"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe193c21a7b88362.png"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe193c23b4c48697.png"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe21feb033374757.jpg"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe21fedcb5213321.jpg"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe21fed4b4650327.jpg"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe21fee97ff67092.jpg"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe21ff5fa5d56382.png"><meta property="og:image" content="https://i.loli.net/2019/06/10/5cfe21feb356788599.jpg"><meta property="og:updated_time" content="2019-07-29T11:28:16.493Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="深入浅出mysql读书笔记_基础篇"><meta name="twitter:description" content="听说是本好书鸭"><meta name="twitter:image" content="https://i.loli.net/2019/06/10/5cfe16e056f9274770.png"><link rel="canonical" href="http://yoursite.com/2019/06/10/深入浅出MySql读书笔记_基础篇/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>深入浅出mysql读书笔记_基础篇 | 但行好事,莫问前程</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><script type="text/javascript" src="/js/src/clicklove.js"></script><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div> <a href="https://github.com/RobotWuYun" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">但行好事,莫问前程</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">记录学习的技能和遇到的问题</p></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/10/深入浅出MySql读书笔记_基础篇/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="上课睡觉觉"><meta itemprop="description" content="keep learning"><meta itemprop="image" content="/image/headPic.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="但行好事,莫问前程"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">深入浅出mysql读书笔记_基础篇</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-06-10 16:36:13" itemprop="dateCreated datePublished" datetime="2019-06-10T16:36:13+08:00">2019-06-10</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-07-29 19:28:16" itemprop="dateModified" datetime="2019-07-29T19:28:16+08:00">2019-07-29</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/笔记/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">评论数：</span><a href="/2019/06/10/深入浅出MySql读书笔记_基础篇/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2019/06/10/深入浅出MySql读书笔记_基础篇/" itemprop="commentCount"></span></a></span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i> 热度：<span class="busuanzi-value" id="busuanzi_value_page_pv"></span> <span>℃</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img src="https://i.loli.net/2019/06/10/5cfe16e056f9274770.png" alt="mysql封面.png"></p><center><p>听说是本好书鸭</p></center><a id="more"></a><h1 id="深入浅出MySQL"><a href="#深入浅出MySQL" class="headerlink" title="深入浅出MySQL"></a>深入浅出MySQL</h1><h2 id="第一章-安装与配置"><a href="#第一章-安装与配置" class="headerlink" title="第一章 安装与配置"></a>第一章 安装与配置</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>&emsp;&emsp;一般选择typical,常用组件都会被安装,默认安装到C盘.</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>&emsp;&emsp;在开始目录下找到mysql,运行 MySQL Server Instance<br>Configuration Wizard.</p><p>详细配置(图文)(Detail Configuration)</p><p><img src="https://i.loli.net/2019/06/10/5cfe193c21a7b88362.png" alt="第一步.png"></p><p><img src="https://i.loli.net/2019/06/10/5cfe193c23b4c48697.png" alt="第二步.png"></p><blockquote><p>不同的数据库引擎的的区别</p><ul><li>多功能数据库(Multifunction Database)<br>对事务性(InnoDB)和非事务性(MyISAM)的存储引擎的存取都很快</li><li>事务性数据库(Transactional DataBase Only)<pre><code>优化了事务性存储引擎,但非事务性也能用</code></pre></li><li>非事务性数据库(Non-Transactional DataBase Only)<pre><code>优化了fe非事务性存储引擎,但事务性不能用!  </code></pre></li><li><strong>注意:选择非事务性数据库是,事务性不能用</strong></li></ul></blockquote><p>存储引擎<br>可以理解为不同的表类型</p><p><img src="https://i.loli.net/2019/06/10/5cfe21feb033374757.jpg" alt="第三步.jpg"></p><p><img src="https://i.loli.net/2019/06/10/5cfe21fedcb5213321.jpg" alt="第四步.jpg"></p><p><img src="https://i.loli.net/2019/06/10/5cfe21fed4b4650327.jpg" alt="第五步.jpg"></p><p><img src="https://i.loli.net/2019/06/10/5cfe21fee97ff67092.jpg" alt="第六步.jpg"></p><p><img src="https://i.loli.net/2019/06/10/5cfe21ff5fa5d56382.png" alt="第七步.png"></p><p><img src="https://i.loli.net/2019/06/10/5cfe21feb356788599.jpg" alt="第八步.jpg"></p><h3 id="启动和关闭mysql服务"><a href="#启动和关闭mysql服务" class="headerlink" title="启动和关闭mysql服务"></a>启动和关闭mysql服务</h3><blockquote><p>mysql服务和mysql数据库</p><ul><li>mysql服务<br>&emsp;&emsp;一系列后台服务</li><li>mysql数据库<br>&emsp;&emsp;一系列的数据目录和数据文件</li><li>mysql数据库必须在mysql服务启动后才可以进行访问.</li></ul></blockquote><ul><li><p>windows<br>启动:</p><ol><li>控制面板-&gt;管理工具-&gt;服务-&gt;开启</li><li>在cmd中<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br></pre></td></tr></table></figure></li></ol><p>关闭:</p><ol><li>控制面板-&gt;管理工具-&gt;服务-&gt;关闭</li><li>在cmd中<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop mysql</span><br></pre></td></tr></table></figure></li></ol></li><li><p>linux<br>在root账户下<br>启动:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure><p>重启:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql restart</span><br></pre></td></tr></table></figure><p>关闭:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql stop</span><br></pre></td></tr></table></figure></li></ul><h2 id="第二章-SQL基础"><a href="#第二章-SQL基础" class="headerlink" title="第二章 SQL基础"></a>第二章 SQL基础</h2><p>SQL Structure Query Language 结构化查询语言</p><h3 id="sql分类"><a href="#sql分类" class="headerlink" title="sql分类"></a>sql分类</h3><p>sql主要可以分为<strong>3</strong>类:</p><blockquote><ol><li><p>DDL(Data Definition Languages)语句:<br>数据定义语言,这些语句定义了不同的数据段,数据库,表,列,索引等数据库对象定义.</p><blockquote><p>常用关键词:create,drop,alter等</p></blockquote></li><li><p>DML(Data Manipulation Language)语句:<br>数据库操作语句,用于添加,删除,更新和查询数据库记录,并检查数据完整性.</p><blockquote><p>常用关键词:insert,delete,update,select等</p></blockquote></li><li><p>DCL(Data Control Language)语句:<br>数据控制语句,用于控制不同的数据段直接的许可和访问级别的语句.这些语句定义了数据库,表,字段,用户的访问权限和安全级别.</p><blockquote><p>主要关键词:grant,revoke等</p></blockquote></li></ol></blockquote><h4 id="DDL语句"><a href="#DDL语句" class="headerlink" title="DDL语句"></a>DDL语句</h4><p>简单来说就是对数据库内部的对象进行创建,删除,修改的操作语言.</p><blockquote><p>与DML语言最大的区别:<br>&emsp;&emsp;DML只对表内部数据进行操作,不涉及表定义,结构的修改,更不会涉及其他对象.DDL更多的是被数据库管理员(DBA)使用,一般很少被开发人员使用.</p></blockquote><h5 id="1-创建数据库"><a href="#1-创建数据库" class="headerlink" title="1. 创建数据库"></a>1. <strong>创建数据库</strong></h5><h5 id="连接mysql数据库"><a href="#连接mysql数据库" class="headerlink" title="连接mysql数据库:"></a><strong>连接mysql数据库</strong>:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u[user] -p[password]</span><br></pre></td></tr></table></figure><p>mysql是客户端命令,-u后面跟连接的数据库用户,-p后面跟密码,也可以不直接写出密码,之后会让你输入的</p><h5 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a><strong>创建数据库</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE [dbname];</span><br></pre></td></tr></table></figure><p>创建成功后会显示:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Query OK,1 row affected (0.00 sec)</span><br></pre></td></tr></table></figure><blockquote><ul><li>Query OK 表示命令执行成功(所有的DDL和DML,不包括select,执行成功都显示这个)</li><li>1 row affected 表示影响到了数据库的一行记录</li><li>0.00 sec 表示执行的时间</li></ul></blockquote><p>如果数据库已经存在,则显示:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 1007 (HY000):Can&apos;t Create database &apos;[dbname]&apos;;</span><br></pre></td></tr></table></figure><h5 id="那如何查看系统中有哪些数据库呢"><a href="#那如何查看系统中有哪些数据库呢" class="headerlink" title="那如何查看系统中有哪些数据库呢?"></a>那如何<strong>查看系统中有哪些数据库</strong>呢?</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><blockquote><p>数据库创建时,创建的表及其功能:</p><ul><li>information_schema:<br>主要存储了系统中的一些数据库对象信息,比如:用户表信息,列信息,权限信息,字符集信息,分区信息等.</li></ul><ul><li>cluster:<br>存储了系统的集群信息.</li><li>mysql:<br>存储了用户的权限信息.</li><li>test:<br>系统自动创建的测试数据库,任何用户都可以使用.</li></ul></blockquote><h5 id="选择要操作的数据库"><a href="#选择要操作的数据库" class="headerlink" title="选择要操作的数据库:"></a><strong>选择要操作的数据库</strong>:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE [dbname];</span><br></pre></td></tr></table></figure><p>成功切换后会返回:Database changed</p><h5 id="查看数据库中所有表"><a href="#查看数据库中所有表" class="headerlink" title="查看数据库中所有表:"></a><strong>查看数据库中所有表</strong>:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables</span><br></pre></td></tr></table></figure><p>有表则显示表,没有则显示</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Empty set (0.00 sec)</span><br></pre></td></tr></table></figure><h5 id="2-删除数据库"><a href="#2-删除数据库" class="headerlink" title="2. 删除数据库"></a>2. <strong>删除数据库</strong></h5><p>命令如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database [dbname];</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意</strong>:这里操作成功后显示的是”<strong>0 row affected</strong>“,原因是MySQL里面drop的结果都是0 row affected.</p></blockquote><blockquote><p><strong>注意</strong>:数据库删除后,里面的数据也会跟着全部删除,所以在删除前要备份好数据.</p></blockquote><h5 id="3-创建表"><a href="#3-创建表" class="headerlink" title="3. 创建表"></a>3. <strong>创建表</strong></h5><p>命令如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE [tablename] (</span><br><span class="line">    column1_name column1_type constraints,</span><br><span class="line">    column2_name column2_type constraints,</span><br><span class="line">    column_last_name column_last_type constraints</span><br><span class="line">);</span><br></pre></td></tr></table></figure><blockquote><ul><li><strong>注意</strong>: MySQL的表名是以目录的形式存在,所以支持任何目录名支持的字符.</li></ul></blockquote><blockquote><p>column_name是列名.<br>column_type是列的数据类型<br>constraints是约束条件</p></blockquote><p>例:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">'emp'</span> (</span><br><span class="line">    <span class="string">'ename'</span> <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">    <span class="string">'hiredate'</span> <span class="built_in">date</span> <span class="keyword">DEFAULT</span> <span class="literal">NULL</span></span><br><span class="line">    <span class="keyword">KEY</span> <span class="string">'idx_emp_ename'</span> (<span class="string">'ename'</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=gbk</span><br></pre></td></tr></table></figure><h5 id="查看表定义"><a href="#查看表定义" class="headerlink" title="查看表定义"></a><strong>查看表定义</strong></h5><p>方法一:(简单,以表的形式显示)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DESC [tablename];</span><br></pre></td></tr></table></figure><p>方法二:(详细,显示创建语句)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE TABLE [tablename];</span><br></pre></td></tr></table></figure><h5 id="4-删除表"><a href="#4-删除表" class="headerlink" title="4. 删除表"></a>4. <strong>删除表</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE [tablename];</span><br></pre></td></tr></table></figure><h5 id="5-修改表"><a href="#5-修改表" class="headerlink" title="5. 修改表"></a>5. <strong>修改表</strong></h5><ol><li><p><strong>修改表类型</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tablename MODIFY [COLUMN] column_definition [FIRST|AFTER col_name]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert table emp modify ename varchar(20);</span><br></pre></td></tr></table></figure></li><li><p><strong>增加表字段</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tablename ADD [COLUMN] column_definition [FIRST|AFTER col_name]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert table emp add column age int(3);</span><br></pre></td></tr></table></figure></li><li><p><strong>删除表字段</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE tablename DROP [COLUMN] col_name</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert table emp drop column age;</span><br></pre></td></tr></table></figure></li><li><p><strong>字段改名</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALERT TABLE tablename CHANGE [COULMN] old_col_name column_definition [FIRST|AFTER col_name]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert table emp change age age1 int(4);</span><br></pre></td></tr></table></figure><blockquote><p>注意:change和modify都可以修改表的定义,不同的是change后面需要写两次列名,不方便.但是change的优点是可以的修改列名称,modify则不能</p></blockquote></li></ol><ol start="5"><li><p><strong>修改字段排列顺序</strong><br> 前面修改和新增后面都跟了一个可选项:<em>first|after column_name</em>,这个选项用来修改字段在表中的位置,默认ADD增加的新字段在表的最后位置,而CHANGE/MODIFY默认不会修改字段位置.</p><blockquote><p><strong>注意:</strong>CHANGE/FIRST|AFTER COLUMN 这些关键词都属于MySQL在标准SQL上的扩展,在其他数据库上不一定适用.</p></blockquote></li><li><p><strong>更改表明</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALERT TABLE tablename RENAME [TO] new_tablename</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert table emp rename emp1;</span><br></pre></td></tr></table></figure></li></ol><h4 id="DML语句"><a href="#DML语句" class="headerlink" title="DML语句"></a>DML语句</h4><p>​ 用于对数据库中表记录的操作,包含表记录的插入(insert),更新(update),删除(delete),查询(select).</p><h5 id="插入记录"><a href="#插入记录" class="headerlink" title="插入记录"></a>插入记录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO tablename(field1,field2,....fieldn) VALUES (vlaues1,values2,...valuesn);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into emp(ename,hiredate,sal) values (&apos;zzz&apos;,&apos;2001-01-01&apos;);</span><br></pre></td></tr></table></figure><p><strong>不指定字段名</strong>(但values后的顺序应该和字段的排序一致)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO tablename  VALUES (vlaues1,values2,...valuesn);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into emp values (&apos;zzz&apos;,&apos;2001-01-01&apos;);</span><br></pre></td></tr></table></figure><p><strong>省略部分值</strong></p><p>含可空字段,非空但含有默认值字段,自增字段,可以不在insert后的字段列表里出现,values后面只写对应字段的value.</p><p>如:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into emp (ename,sal) values (&apos;dony&apos;,1000);</span><br></pre></td></tr></table></figure><p><strong>插入多条</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO tablename(field1,field2,....fieldn) </span><br><span class="line">VALUES</span><br><span class="line">(vlaues1,values2,...valuesn),</span><br><span class="line">(vlaues1,values2,...valuesn),</span><br><span class="line">...</span><br><span class="line">(vlaues1,values2,...valuesn);</span><br></pre></td></tr></table></figure><h5 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h5><p>通过update更新数据.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE tablename SET field1=value1,field2=value2....fieldn=valuen [WHERE CONDITION]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update emp set sal=4000 where ename=&apos;lisa&apos;;</span><br></pre></td></tr></table></figure><p><strong>更新多个表的数据</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE t1,t2...tn set t1.field1=expr1,tn.fieldn=exprn [WHERE CONDITION]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uodate emp a,dept b set a.sal=a.sal*b.deptno,b.deptname=a.ename where a.deptno = b.deptno;</span><br></pre></td></tr></table></figure><h5 id="删除记录"><a href="#删除记录" class="headerlink" title="删除记录"></a>删除记录</h5><p>用delete删除记录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE FROM tablename [WHERE CONDITION]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from emp where ename=&apos;dony&apos;;</span><br></pre></td></tr></table></figure><p><strong>删除多个表记录</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE t1,t2...tn FROM t1,t2...tn[WHERE CONDITION]</span><br></pre></td></tr></table></figure><blockquote><p><strong>注意:</strong>如果from后面的表名用别名,则delete后面也要用相应的别名,否则会提示语法错误.</p></blockquote><blockquote><p><strong>注意:</strong>无论是多表还是单表,不加WHERE条件都会把所有记录都删掉,操作时小心.</p></blockquote><h5 id="查询记录"><a href="#查询记录" class="headerlink" title="查询记录"></a>查询记录</h5><p><strong>基本语法</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM tablename [WHERE CONDITION]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp;</span><br></pre></td></tr></table></figure><p>其中”*”表示要将所有的记录都选出来,也可以用逗号分隔的所有字段来代替.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select ename,sal from emp;</span><br></pre></td></tr></table></figure><h6 id="查询不重复的记录"><a href="#查询不重复的记录" class="headerlink" title="查询不重复的记录"></a>查询不重复的记录</h6><p>通过distinct实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select distinct deptno from	emp;</span><br></pre></td></tr></table></figure><h6 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h6><p>通过where关键词实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where deptno = 1;</span><br></pre></td></tr></table></figure><blockquote><p>除了=,还可以使用&gt;,&lt;,&gt;=,&lt;=,!=等比较运算符,还可以用and,or实现多条件联合查询</p></blockquote><p>例如:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp where sal=2000 and deptno=1;</span><br></pre></td></tr></table></figure><h6 id="排序和限制"><a href="#排序和限制" class="headerlink" title="排序和限制"></a>排序和限制</h6><p>通过order by实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM tablename [WHERE CONDITION] [ORDER BY field (DESC|ASC),field1 (DESC|ASC)...fieldn(DESC|ASC)]</span><br></pre></td></tr></table></figure><blockquote><p>DESC和ASC是排序关键词,DESC表示按字段排序,ASC表示升序,如果不写默认升序排列.ORDER BY后可以跟多个字段,并且每个字段可以有不同的排序顺序.</p></blockquote><h6 id="部分显示"><a href="#部分显示" class="headerlink" title="部分显示"></a>部分显示</h6><p>通过limit实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ...... [LIMIT offset_start,row_count]</span><br></pre></td></tr></table></figure><blockquote><p>offset_start 记录起始偏移量,默认为0</p><p>row_count 显示行数</p></blockquote><blockquote><p><strong>注意:</strong>limit是MySQL扩展SQL92后的语法,在其他数据库上并不能通用.</p></blockquote><h6 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h6></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 上课睡觉觉</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="http://yoursite.com/2019/06/10/深入浅出MySql读书笔记_基础篇/" title="深入浅出mysql读书笔记_基础篇">http://yoursite.com/2019/06/10/深入浅出MySql读书笔记_基础篇/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/编程/" rel="tag"><i class="fa fa-tag"></i> # 编程</a><a href="/tags/mysql/" rel="tag"><i class="fa fa-tag"></i> # mysql</a><a href="/tags/读书笔记/" rel="tag"><i class="fa fa-tag"></i> # 读书笔记</a><a href="/tags/深入浅出mysql/" rel="tag"><i class="fa fa-tag"></i> # 深入浅出mysql</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/06/10/leetCode刷题之路_初级_数组篇/" rel="next" title="leetCode刷题之路_初级_数组篇"><i class="fa fa-chevron-left"></i> leetCode刷题之路_初级_数组篇</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2019/07/18/百度云编程资源(过期无补)/" rel="prev" title="百度云编程资源(过期无补)">百度云编程资源(过期无补)<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <a href="/"><img class="site-author-image" itemprop="image" src="/image/headPic.png" alt="上课睡觉觉"></a><p class="site-author-name" itemprop="name">上课睡觉觉</p><div class="site-description motion-element" itemprop="description">keep learning</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">25</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/RobotWuYun" title="GitHub &rarr; https://github.com/RobotWuYun" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> 推荐阅读</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="http://how2j.cn/" title="http://how2j.cn/" rel="noopener" target="_blank">java</a></li><li class="links-of-blogroll-item"> <a href="http://blog.knownsec.com/Knownsec_RD_Checklist/index.html" title="http://blog.knownsec.com/Knownsec_RD_Checklist/index.html" rel="noopener" target="_blank">知道创宇技能树</a></li></ul></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#深入浅出MySQL"><span class="nav-number">1.</span> <span class="nav-text">深入浅出MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#第一章-安装与配置"><span class="nav-number">1.1.</span> <span class="nav-text">第一章 安装与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装"><span class="nav-number">1.1.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置"><span class="nav-number">1.1.2.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动和关闭mysql服务"><span class="nav-number">1.1.3.</span> <span class="nav-text">启动和关闭mysql服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#第二章-SQL基础"><span class="nav-number">1.2.</span> <span class="nav-text">第二章 SQL基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#sql分类"><span class="nav-number">1.2.1.</span> <span class="nav-text">sql分类</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#DDL语句"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">DDL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-创建数据库"><span class="nav-number">1.2.1.1.1.</span> <span class="nav-text">1. 创建数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#连接mysql数据库"><span class="nav-number">1.2.1.1.2.</span> <span class="nav-text">连接mysql数据库:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#创建数据库"><span class="nav-number">1.2.1.1.3.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#那如何查看系统中有哪些数据库呢"><span class="nav-number">1.2.1.1.4.</span> <span class="nav-text">那如何查看系统中有哪些数据库呢?</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#选择要操作的数据库"><span class="nav-number">1.2.1.1.5.</span> <span class="nav-text">选择要操作的数据库:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看数据库中所有表"><span class="nav-number">1.2.1.1.6.</span> <span class="nav-text">查看数据库中所有表:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-删除数据库"><span class="nav-number">1.2.1.1.7.</span> <span class="nav-text">2. 删除数据库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-创建表"><span class="nav-number">1.2.1.1.8.</span> <span class="nav-text">3. 创建表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看表定义"><span class="nav-number">1.2.1.1.9.</span> <span class="nav-text">查看表定义</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-删除表"><span class="nav-number">1.2.1.1.10.</span> <span class="nav-text">4. 删除表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-修改表"><span class="nav-number">1.2.1.1.11.</span> <span class="nav-text">5. 修改表</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DML语句"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">DML语句</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#插入记录"><span class="nav-number">1.2.1.2.1.</span> <span class="nav-text">插入记录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#更新记录"><span class="nav-number">1.2.1.2.2.</span> <span class="nav-text">更新记录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除记录"><span class="nav-number">1.2.1.2.3.</span> <span class="nav-text">删除记录</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查询记录"><span class="nav-number">1.2.1.2.4.</span> <span class="nav-text">查询记录</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#查询不重复的记录"><span class="nav-number">1.2.1.2.4.1.</span> <span class="nav-text">查询不重复的记录</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#条件查询"><span class="nav-number">1.2.1.2.4.2.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#排序和限制"><span class="nav-number">1.2.1.2.4.3.</span> <span class="nav-text">排序和限制</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#部分显示"><span class="nav-number">1.2.1.2.4.4.</span> <span class="nav-text">部分显示</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#聚合"><span class="nav-number">1.2.1.2.4.5.</span> <span class="nav-text">聚合</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></div></div></div><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><h3 class="widget-title">Tag Cloud</h3><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas" style=""><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/">Typora</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leecCode/">leecCode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/next/">next</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/优化/">优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/初级算法/">初级算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/刷题/">刷题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习笔记/">学习笔记</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/安装/">安装</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/教程/">教程</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数组/">数组</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/深入浅出mysql/">深入浅出mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/练手项目/">练手项目</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编程/">编程</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/美化/">美化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读书笔记/">读书笔记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/资源/">资源</a><span class="tag-list-count">1</span></li></ul></canvas></div></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">上课睡觉觉</span> <span class="post-meta-divider">|</span><div class="theme-info"><div class="powered-by"></div> <span class="post-count">博客全站共26.1k字</span> <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><br></div><script>var now=new Date;function createtime(){var n=new Date("6/4/2019 12:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML=" Runing "+dnum+" D ",document.getElementById("times").innerHTML=hnum+" H "+mnum+" M "+snum+" S"}setInterval("createtime()",250)</script><br></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="访客"><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=2.1.3"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/js/utils.js?v=7.1.2"></script><script src="/js/motion.js?v=7.1.2"></script><script src="/js/affix.js?v=7.1.2"></script><script src="/js/schemes/pisces.js?v=7.1.2"></script><script src="/js/scrollspy.js?v=7.1.2"></script><script src="/js/post-details.js?v=7.1.2"></script><script src="/js/next-boot.js?v=7.1.2"></script><script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return-1<GUEST.indexOf(e)}),new Valine({el:"#comments",verify:!0,notify:!0,appId:"307oukv7PLH0lFI21FdIyLQN-gzGzoHsz",appKey:"OxpbXXBsre8puGriAb0RuF3Y",placeholder:"欢迎交流讨论...",avatar:"mm",meta:guest,pageSize:"10",visitor:!1,lang:"zh-cn"})</script><script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script>
    
    function addCount(Counter) {
      var $visitors = $('.leancloud_visitors');
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', '/classes/Counter/' + counter.objectId, JSON.stringify({ time: { '__op': 'Increment', 'amount': 1 } }))
            
              .done(function() {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.time + 1);
              })
            
              .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
              })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! More info at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + '')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': '',
                'X-LC-Key': '',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            addCount(Counter);
          
        });
    });
  </script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!0},log:!1})</script></body></html>